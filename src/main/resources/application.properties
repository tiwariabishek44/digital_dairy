# Basic App Config
spring.application.name=DigitalDairy

# H2 Database Configuration (for dev/testing - switch to PostgreSQL later)
spring.datasource.url=jdbc:h2:mem:testdb
spring.datasource.driverClassName=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=

# H2 Console (access at http://localhost:8080/h2-console)
spring.h2.console.enabled=true

# JPA/Hibernate Configuration
spring.jpa.database-platform=org.hibernate.dialect.H2Dialect
spring.jpa.hibernate.ddl-auto=create-drop
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=false
spring.jpa.properties.hibernate.jdbc.time_zone=UTC

# JPA Batch Processing (for efficient milk record CSV uploads - 500+ records)
spring.jpa.properties.hibernate.jdbc.batch_size=50
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true
spring.jpa.properties.hibernate.batch_versioned_data=true

# Jackson for JSON (UTC dates)
spring.jackson.time-zone=UTC
spring.jackson.serialization.write-dates-as-timestamps=false

# Multipart for CSV uploads
spring.servlet.multipart.enabled=true
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=50MB
spring.servlet.multipart.file-size-threshold=2KB

# Server Configuration
server.port=8080
server.tomcat.connection-timeout=30000
server.servlet.session.timeout=1800s

# Mail Configuration (Gmail for receipts/alerts - update with your creds)
spring.mail.host=smtp.gmail.com
spring.mail.port=587
# Replace with your Gmail
spring.mail.username=your-email@gmail.com
# Replace with Gmail app password
spring.mail.password=your-app-password
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true

# JWT Configuration (hardcoded for dev - generate a strong base64 secret)
app.jwt.secret=dGhpc0lzQVZlcnlTZWN1cmVTZWNyZXRLZXlGb3JEaWdpdGFsRGFpcnlTeXN0ZW1Kd3RUb2tlbkdlbmVyYXRpb25BbmRWYWxpZGF0aW9uUHVycG9zZXM=
# 15 minutes in milliseconds
app.jwt.access-token-expiration=900000
# 7 days in milliseconds
app.jwt.refresh-token-expiration=604800000

# App Specifics
app.base-url=http://localhost:8080
# Drop your JSON here later
app.firebase-configuration-file=firebase-adminsdk.json
# Update as needed
app.email.from=noreply@digitaldairy.com

# CSV Processing Configuration
app.csv.max-file-size=10MB
app.csv.batch-size=50
app.csv.max-records-per-upload=5000

# Logging Configuration
logging.level.root=INFO
logging.level.com.digitaldairy=INFO
logging.level.org.springframework.security=WARN
logging.level.org.hibernate.SQL=ERROR
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level [%logger{36}] - %msg%n
logging.file.name=./logs/application.log
logging.logback.rollingpolicy.file-name-pattern=./logs/application.log.%d{yyyy-MM-dd}.%i
logging.logback.rollingpolicy.max-file-size=10MB
logging.logback.rollingpolicy.total-size-cap=100MB
logging.logback.rollingpolicy.max-history=30
logging.logback.rollingpolicy.clean-history-on-start=false

# Actuator Management
management.endpoints.web.exposure.include=health,info,metrics
management.endpoints.web.base-path=/actuator
management.endpoint.health.show-details=when-authorized
management.endpoint.health.show-components=always

# CORS Configuration (for mobile app)
app.cors.allowed-origins=http://localhost:3000,https://your-mobile-app.com
app.cors.allowed-methods=GET,POST,PUT,DELETE,OPTIONS
app.cors.allowed-headers=*
app.cors.allow-credentials=true

# Static Resources (if Swagger or static files needed)
spring.web.resources.static-locations=classpath:/static/

# Security (basic for testing - customize in SecurityConfig.java)
spring.security.user.name=admin
spring.security.user.password=admin